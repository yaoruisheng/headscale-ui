import{s as pe,c as ie,a as Z,n as P,r as Be,h as ae,d as Oe,k as Re,F as Ge,o as It}from"../chunks/Com-06Ov.js";import{S as me,i as ge,o as ce,g as D,k as N,u as He,p as J,q as Ue,d as h,e as p,s as L,c as m,a as y,f as B,m as v,h as _,n as $,L as Nt,I as xe,t as te,b as le,A as Ee,B as j,l as O,G as _e,H as ze,K as qe,j as ve,J as Lt,w as ke,x as we,y as Te,z as Ce,M as De,N as Ye,D as Me,E as Se}from"../chunks/nhLTMANt.js";import{a as ue,k as Ot,l as he,u as Bt,m as Vt,o as jt,p as At,q as Pt,c as Rt}from"../chunks/B8W5tzBA.js";import{b as Ht}from"../chunks/COW2zkZt.js";import{p as Ut}from"../chunks/CZYCvijp.js";import{h as re,b as xt,f as ee,D as Ne,i as Ze,c as Je,k as We,j as Pe,g as zt,e as Kt,d as qt}from"../chunks/Cp1iFguf.js";import{g as Ft}from"../chunks/lO_OKXI3.js";function lt(r,e,t){const n=r.slice();return n[15]=e[t],n}function nt(r,e,t){const n=r.slice();return n[18]=e[t],n[20]=t,n}function it(r){let e,t,n,l,i,s,f,a,u=ue(r[6]),c=[];for(let k=0;k<u.length;k+=1)c[k]=rt(nt(r,u,k));let o=r[4]==0&&st(r),d=r[4]==1&&at(),T=r[4]==2&&ct();return{c(){e=p("div"),t=p("div");for(let k=0;k<c.length;k+=1)c[k].c();n=L(),o&&o.c(),l=L(),d&&d.c(),i=L(),T&&T.c(),this.h()},l(k){e=m(k,"DIV",{class:!0});var g=y(e);t=m(g,"DIV",{class:!0});var b=y(t);for(let E=0;E<c.length;E+=1)c[E].l(b);b.forEach(h),n=B(g),o&&o.l(g),l=B(g),d&&d.l(g),i=B(g),T&&T.l(g),g.forEach(h),this.h()},h(){v(t,"class","tabs"),v(e,"class","p-2 max-w-screen-lg border border-dashed border-base-content mx-4 rounded-md text-sm text-base-content shadow mb-10")},m(k,g){D(k,e,g),_(e,t);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(t,null);_(e,n),o&&o.m(e,null),_(e,l),d&&d.m(e,null),_(e,i),T&&T.m(e,null),a=!0},p(k,g){if(r=k,g&80){u=ue(r[6]);let b;for(b=0;b<u.length;b+=1){const E=nt(r,u,b);c[b]?c[b].p(E,g):(c[b]=rt(E),c[b].c(),c[b].m(t,null))}for(;b<c.length;b+=1)c[b].d(1);c.length=u.length}r[4]==0?o?(o.p(r,g),g&16&&N(o,1)):(o=st(r),o.c(),N(o,1),o.m(e,l)):o&&(o.d(1),o=null),r[4]==1?d?g&16&&N(d,1):(d=at(),d.c(),N(d,1),d.m(e,i)):d&&(d.d(1),d=null),r[4]==2?T?g&16&&N(T,1):(T=ct(),T.c(),N(T,1),T.m(e,null)):T&&(T.d(1),T=null)},i(k){a||(N(o),N(d),N(T),Z(()=>{a&&(f&&f.end(1),s=$(e,ee,{}),s.start())}),a=!0)},o(k){s&&s.invalidate(),f=Nt(e,ee,{duration:r[0]?0:500}),a=!1},d(k){k&&h(e),xe(c,k),o&&o.d(),d&&d.d(),T&&T.d(),k&&f&&f.end()}}}function rt(r){let e,t=r[18]+"",n,l,i;function s(){return r[8](r[20])}return{c(){e=p("button"),n=te(t),this.h()},l(f){e=m(f,"BUTTON",{class:!0});var a=y(e);n=le(a,t),a.forEach(h),this.h()},h(){v(e,"class","tab tab-bordered h-fit w-1/3"),Ee(e,"tab-active",r[4]==r[20])},m(f,a){D(f,e,a),_(e,n),l||(i=j(e,"click",s),l=!0)},p(f,a){r=f,a&16&&Ee(e,"tab-active",r[4]==r[20])},d(f){f&&h(e),l=!1,i()}}}function st(r){let e,t,n='Install Tailscale with the client pointing to your domain (see <a target="_blank" rel="noreferrer" class="link link-primary" href="https://github.com/juanfont/headscale/tree/main/docs">headscale client documentation</a>). Log in using the tray icon, and your browser should give you instructions with a key.',l,i,s="<code>headscale -u USER nodes register --key &lt;your device key&gt;</code>",f,a,u="<p>Copy the key below:</p>",c,o,d,T,k="Device Key",g,b,E,C,M,F="Select User",U,I,G,S,x,w='<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-1 inline rounded-full hover:bg-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',H,V,A='<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-1 inline rounded-full hover:bg-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',Y,ne,fe,de=ue(r[5]),q=[];for(let R=0;R<de.length;R+=1)q[R]=ot(lt(r,de,R));return{c(){e=p("div"),t=p("p"),t.innerHTML=n,l=L(),i=p("div"),i.innerHTML=s,f=L(),a=p("div"),a.innerHTML=u,c=L(),o=p("form"),d=p("div"),T=p("label"),T.textContent=k,g=L(),b=p("input"),E=L(),C=p("div"),M=p("label"),M.textContent=F,U=L(),I=p("select");for(let R=0;R<q.length;R+=1)q[R].c();G=L(),S=p("div"),x=p("button"),x.innerHTML=w,H=L(),V=p("button"),V.innerHTML=A,this.h()},l(R){e=m(R,"DIV",{class:!0});var Q=y(e);t=m(Q,"P",{"data-svelte-h":!0}),O(t)!=="svelte-1iolw9y"&&(t.innerHTML=n),l=B(Q),i=m(Q,"DIV",{class:!0,"data-svelte-h":!0}),O(i)!=="svelte-ki90vb"&&(i.innerHTML=s),f=B(Q),a=m(Q,"DIV",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-quhcv1"&&(a.innerHTML=u),c=B(Q),o=m(Q,"FORM",{class:!0});var z=y(o);d=m(z,"DIV",{class:!0});var se=y(d);T=m(se,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(T)!=="svelte-18o625f"&&(T.textContent=k),g=B(se),b=m(se,"INPUT",{class:!0,type:!0,placeholder:!0}),se.forEach(h),E=B(z),C=m(z,"DIV",{class:!0});var be=y(C);M=m(be,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(M)!=="svelte-17w6y3k"&&(M.textContent=F),U=B(be),I=m(be,"SELECT",{class:!0});var X=y(I);for(let oe=0;oe<q.length;oe+=1)q[oe].l(X);X.forEach(h),be.forEach(h),G=B(z),S=m(z,"DIV",{class:!0});var K=y(S);x=m(K,"BUTTON",{"data-svelte-h":!0}),O(x)!=="svelte-6jw4ga"&&(x.innerHTML=w),H=B(K),V=m(K,"BUTTON",{type:!0,"data-svelte-h":!0}),O(V)!=="svelte-k8yg8l"&&(V.innerHTML=A),K.forEach(h),z.forEach(h),Q.forEach(h),this.h()},h(){v(i,"class","m-2"),v(a,"class","my-2"),v(T,"class","block text-secondary text-sm font-bold mb-2"),v(T,"for","text"),v(b,"class","card-input"),v(b,"type","text"),b.required=!0,v(b,"placeholder","******************"),v(d,"class","flex-none mr-4"),v(M,"class","block text-secondary text-sm font-bold mb-2"),v(M,"for","select"),v(I,"class","card-select mr-3"),I.required=!0,r[3]===void 0&&Z(()=>r[10].call(I)),v(C,"class","flex-none"),v(V,"type","button"),v(S,"class","flex-none pt-6"),v(o,"class","flex flex-wrap"),v(e,"class","m-2")},m(R,Q){D(R,e,Q),_(e,t),_(e,l),_(e,i),_(e,f),_(e,a),_(e,c),_(e,o),_(o,d),_(d,T),_(d,g),_(d,b),_e(b,r[1]),_(o,E),_(o,C),_(C,M),_(C,U),_(C,I);for(let z=0;z<q.length;z+=1)q[z]&&q[z].m(I,null);ze(I,r[3],!0),_(o,G),_(o,S),_(S,x),_(S,H),_(S,V),r[12](o),ne||(fe=[j(b,"input",r[9]),j(I,"change",r[10]),j(V,"click",r[11]),j(o,"submit",qe(r[7]))],ne=!0)},p(R,Q){if(Q&2&&b.value!==R[1]&&_e(b,R[1]),Q&32){de=ue(R[5]);let z;for(z=0;z<de.length;z+=1){const se=lt(R,de,z);q[z]?q[z].p(se,Q):(q[z]=ot(se),q[z].c(),q[z].m(I,null))}for(;z<q.length;z+=1)q[z].d(1);q.length=de.length}Q&40&&ze(I,R[3])},i(R){Y||Z(()=>{Y=$(e,ee,{}),Y.start()})},o:P,d(R){R&&h(e),xe(q,R),r[12](null),ne=!1,Be(fe)}}}function ot(r){let e,t=(r[15].name.length>1?r[15].name:r[15].email)+"",n,l;return{c(){e=p("option"),n=te(t),this.h()},l(i){e=m(i,"OPTION",{});var s=y(e);n=le(s,t),s.forEach(h),this.h()},h(){e.__value=l=r[15].name.length>1?r[15].name:r[15].email,_e(e,e.__value)},m(i,s){D(i,e,s),_(e,n)},p(i,s){s&32&&t!==(t=(i[15].name.length>1?i[15].name:i[15].email)+"")&&ve(n,t),s&32&&l!==(l=i[15].name.length>1?i[15].name:i[15].email)&&(e.__value=l,_e(e,e.__value))},d(i){i&&h(e)}}}function at(r){let e,t=`<p>Preauth Keys provide the capability to install tailscale using a pre-registered key (see the <code class="bg-base-200 px-2 rounded">--authkey</code> flag in the <a target="_blank" rel="noreferrer" class="link link-primary" href="https://tailscale.com/kb/1080/cli/">tailscale command line documentation</a>)</p> <p>Preauth Keys are especially useful for deploying headscale as an always-on VPN (see the <code class="bg-base-200 px-2 rounded">TS_UNATTENDEDMODE</code> install option in the <a target="_blank" rel="noreferrer" class="link link-primary" href="https://tailscale.com/kb/1189/install-windows-msi/">tailscale documentation</a>) or router-level VPN.</p> <div class="bg-base-200 p-4 m-2 rounded-xl"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="pl-2">Preauth Keys can be managed in the <a href="${Ht}/" class="link link-primary">User Section</a> of the UI</span></div>`,n;return{c(){e=p("div"),e.innerHTML=t,this.h()},l(l){e=m(l,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-cnfl1x"&&(e.innerHTML=t),this.h()},h(){v(e,"class","m-2")},m(l,i){D(l,e,i)},i(l){n||Z(()=>{n=$(e,ee,{}),n.start()})},o:P,d(l){l&&h(e)}}}function ct(r){let e,t='<p>OIDC provides the ability to register an external authentication provider (such as <a target="_blank" rel="noreferrer" class="link link-primary" href="https://www.keycloak.org/">keycloak</a>) to authenticate devices to headscale.</p> <br/> <p>Configure Headscale to register with an authentication provider (see <a target="_blank" rel="noreferrer" class="link link-primary" href="https://github.com/juanfont/headscale/blob/main/config-example.yaml">headscale configuration documentation</a>). Once configured, successfully authenticated devices will automatically self-register</p>',n;return{c(){e=p("div"),e.innerHTML=t,this.h()},l(l){e=m(l,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-au2m9t"&&(e.innerHTML=t),this.h()},h(){v(e,"class","m-2")},m(l,i){D(l,e,i)},i(l){n||Z(()=>{n=$(e,ee,{}),n.start()})},o:P,d(l){l&&h(e)}}}function Jt(r){let e,t,n=r[0]==!0&&it(r);return{c(){n&&n.c(),e=ce()},l(l){n&&n.l(l),e=ce()},m(l,i){n&&n.m(l,i),D(l,e,i),t=!0},p(l,[i]){l[0]==!0?n?(n.p(l,i),i&1&&N(n,1)):(n=it(l),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(He(),J(n,1,1,()=>{n=null}),Ue())},i(l){t||(N(n),t=!0)},o(l){J(n),t=!1},d(l){l&&h(e),n&&n.d(l)}}}function Wt(r,e,t){let n,l,i;ie(r,re,C=>t(13,n=C)),ie(r,Ut,C=>t(14,l=C)),ie(r,xt,C=>t(5,i=C));let{newDeviceCardVisible:s=!1}=e,{newDeviceKey:f=""}=e,a,u="",c=["Default Configuration","With Preauth Keys","With OIDC"],o=0;function d(){a.reportValidity()?Ot(f,u).then(C=>{t(0,s=!1),t(1,f=""),he(),l.url.searchParams.get("nodekey")&&(l.url.searchParams.delete("nodekey"),Ft(`?${l.url.searchParams.toString()}`))}).catch(C=>{ae(re,n=C,n)}):ae(re,n="provide a valid key",n)}const T=C=>t(4,o=C);function k(){f=this.value,t(1,f)}function g(){u=Lt(this),t(3,u)}const b=()=>{t(0,s=!1),t(1,f="")};function E(C){Oe[C?"unshift":"push"](()=>{a=C,t(2,a)})}return r.$$set=C=>{"newDeviceCardVisible"in C&&t(0,s=C.newDeviceCardVisible),"newDeviceKey"in C&&t(1,f=C.newDeviceKey)},[s,f,a,u,o,i,c,d,T,k,g,b,E]}class Gt extends me{constructor(e){super(),ge(this,e,Wt,Jt,pe,{newDeviceCardVisible:0,newDeviceKey:1})}}var Yt=function(r,e,t,n){function l(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function f(c){try{u(n.next(c))}catch(o){s(o)}}function a(c){try{u(n.throw(c))}catch(o){s(o)}}function u(c){c.done?i(c.value):l(c.value).then(f,a)}u((n=n.apply(r,e||[])).next())})};function ut(r,e){return Yt(this,void 0,void 0,function*(){let t=localStorage.getItem("headscaleURL")||"",n=localStorage.getItem("headscaleAPIKey")||"",l=`/api/v1/node/${r}/approve_routes`;yield fetch(t+l,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({routes:e})}).then(i=>i.ok?i:i.text().then(s=>{throw JSON.parse(s).message})).catch(i=>{throw i})})}function Zt(r){let e,t="pending",n,l;return{c(){e=p("button"),e.textContent=t,this.h()},l(i){e=m(i,"BUTTON",{type:!0,class:!0,"data-tip":!0,"data-svelte-h":!0}),O(e)!=="svelte-16u0i5c"&&(e.textContent=t),this.h()},h(){v(e,"type","button"),v(e,"class","btn btn-xs tooltip capitalize bg-secondary text-secondary-content mx-1"),v(e,"data-tip","click to enable route"),Ee(e,"disabled",r[2])},m(i,s){D(i,e,s),n||(l=j(e,"click",r[6]),n=!0)},p(i,s){s&4&&Ee(e,"disabled",i[2])},d(i){i&&h(e),n=!1,l()}}}function Qt(r){let e,t="active",n,l;return{c(){e=p("button"),e.textContent=t,this.h()},l(i){e=m(i,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(e)!=="svelte-au97k2"&&(e.textContent=t),this.h()},h(){v(e,"type","button"),v(e,"class","btn btn-xs tooltip capitalize bg-success text-success-content mx-1")},m(i,s){D(i,e,s),n||(l=j(e,"click",r[5]),n=!0)},p:P,d(i){i&&h(e),n=!1,l()}}}function ft(r){let e,t="subnet";return{c(){e=p("button"),e.textContent=t,this.h()},l(n){e=m(n,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(e)!=="svelte-pabgsz"&&(e.textContent=t),this.h()},h(){v(e,"type","button"),v(e,"class","btn btn-xs tooltip capitalize bg-secondary text-secondary-content mx-1")},m(n,l){D(n,e,l)},d(n){n&&h(e)}}}function Xt(r){let e,t,n,l,i=r[1].subnetRoutes.includes(r[0]),s;function f(o,d){return d&3&&(n=null),n==null&&(n=!!o[1].approvedRoutes.includes(o[0])),n?Qt:Zt}let a=f(r,-1),u=a(r),c=i&&ft();return{c(){e=te(r[0]),t=L(),u.c(),l=L(),c&&c.c(),s=ce()},l(o){e=le(o,r[0]),t=B(o),u.l(o),l=B(o),c&&c.l(o),s=ce()},m(o,d){D(o,e,d),D(o,t,d),u.m(o,d),D(o,l,d),c&&c.m(o,d),D(o,s,d)},p(o,[d]){d&1&&ve(e,o[0]),a===(a=f(o,d))&&u?u.p(o,d):(u.d(1),u=a(o),u&&(u.c(),u.m(l.parentNode,l))),d&3&&(i=o[1].subnetRoutes.includes(o[0])),i?c||(c=ft(),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},i:P,o:P,d(o){o&&(h(e),h(t),h(l),h(s)),u.d(o),c&&c.d(o)}}}function $t(r,e,t){let n;ie(r,re,o=>t(7,n=o));let{route:l=""}=e,{device:i=new Ne}=e,s=!1;function f(){ut(i.id,[...i.approvedRoutes,l]).then(()=>{he()}).catch(o=>{ae(re,n=o,n)})}function a(){ut(i.id,i.approvedRoutes.filter(o=>o!==l)).then(()=>{he()}).catch(o=>{ae(re,n=o,n)})}const u=()=>{t(2,s=!0),a(),t(2,s=!1)},c=()=>{t(2,s=!0),f(),t(2,s=!1)};return r.$$set=o=>{"route"in o&&t(0,l=o.route),"device"in o&&t(1,i=o.device)},[l,i,s,f,a,u,c]}class el extends me{constructor(e){super(),ge(this,e,$t,Xt,pe,{route:0,device:1})}}function dt(r,e,t){const n=r.slice();return n[1]=e[t],n}function ht(r){let e,t,n,l;return t=new el({props:{route:r[1],device:r[0]}}),{c(){e=p("li"),ke(t.$$.fragment),n=L()},l(i){e=m(i,"LI",{});var s=y(e);we(t.$$.fragment,s),n=B(s),s.forEach(h)},m(i,s){D(i,e,s),Te(t,e,null),_(e,n),l=!0},p(i,s){const f={};s&1&&(f.route=i[1]),s&1&&(f.device=i[0]),t.$set(f)},i(i){l||(N(t.$$.fragment,i),l=!0)},o(i){J(t.$$.fragment,i),l=!1},d(i){i&&h(e),Ce(t)}}}function tl(r){let e,t="Device Routes",n,l,i,s,f=ue(r[0].availableRoutes),a=[];for(let c=0;c<f.length;c+=1)a[c]=ht(dt(r,f,c));const u=c=>J(a[c],1,1,()=>{a[c]=null});return{c(){e=p("th"),e.textContent=t,n=L(),l=p("td"),i=p("ul");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=m(c,"TH",{"data-svelte-h":!0}),O(e)!=="svelte-7hscqe"&&(e.textContent=t),n=B(c),l=m(c,"TD",{});var o=y(l);i=m(o,"UL",{class:!0});var d=y(i);for(let T=0;T<a.length;T+=1)a[T].l(d);d.forEach(h),o.forEach(h),this.h()},h(){v(i,"class","list-disc list-inside")},m(c,o){D(c,e,o),D(c,n,o),D(c,l,o),_(l,i);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(i,null);s=!0},p(c,[o]){if(o&1){f=ue(c[0].availableRoutes);let d;for(d=0;d<f.length;d+=1){const T=dt(c,f,d);a[d]?(a[d].p(T,o),N(a[d],1)):(a[d]=ht(T),a[d].c(),N(a[d],1),a[d].m(i,null))}for(He(),d=f.length;d<a.length;d+=1)u(d);Ue()}},i(c){if(!s){for(let o=0;o<f.length;o+=1)N(a[o]);s=!0}},o(c){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)J(a[o]);s=!1},d(c){c&&(h(e),h(n),h(l)),xe(a,c)}}}function ll(r,e,t){let{device:n=new Ne}=e;return r.$$set=l=>{"device"in l&&t(0,n=l.device)},[n]}class nl extends me{constructor(e){super(),ge(this,e,ll,tl,pe,{device:0})}}function il(r){let e,t,n,l,i='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',s,f,a,u='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',c,o,d;return{c(){e=p("form"),t=p("input"),n=L(),l=p("button"),l.innerHTML=i,f=L(),a=p("button"),a.innerHTML=u,this.h()},l(T){e=m(T,"FORM",{});var k=y(e);t=m(k,"INPUT",{class:!0}),n=B(k),l=m(k,"BUTTON",{class:!0,"data-svelte-h":!0}),O(l)!=="svelte-1alfzgj"&&(l.innerHTML=i),f=B(k),a=m(k,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(a)!=="svelte-1nes1i4"&&(a.innerHTML=u),k.forEach(h),this.h()},h(){t.autofocus=!0,t.required=!0,v(t,"class","bg-primary w-16"),v(l,"class","ml-1"),v(a,"type","button"),v(a,"class","ml-1")},m(T,k){D(T,e,k),_(e,t),_e(t,r[1]),_(e,n),_(e,l),_(e,f),_(e,a),t.focus(),o||(d=[j(t,"input",r[4]),j(a,"click",De(r[5])),j(e,"submit",qe(r[2]))],o=!0)},p(T,k){k&2&&t.value!==T[1]&&_e(t,T[1])},i(T){s||Z(()=>{s=$(l,ee,{}),s.start()}),c||Z(()=>{c=$(a,ee,{}),c.start()})},o:P,d(T){T&&h(e),o=!1,Be(d)}}}function rl(r){let e,t="+ tag";return{c(){e=p("span"),e.textContent=t},l(n){e=m(n,"SPAN",{"data-svelte-h":!0}),O(e)!=="svelte-hw5iwt"&&(e.textContent=t)},m(n,l){D(n,e,l)},p:P,i:P,o:P,d(n){n&&h(e)}}}function sl(r){let e,t,n;function l(f,a){return f[0]?il:rl}let i=l(r),s=i(r);return{c(){e=p("button"),s.c(),this.h()},l(f){e=m(f,"BUTTON",{class:!0});var a=y(e);s.l(a),a.forEach(h),this.h()},h(){v(e,"class","btn btn-xs border-dotted border-2 btn-primary opacity-60 normal-case")},m(f,a){D(f,e,a),s.m(e,null),t||(n=j(e,"click",De(r[6])),t=!0)},p(f,[a]){i===(i=l(f))&&s?s.p(f,a):(s.d(1),s=i(f),s&&(s.c(),N(s,1),s.m(e,null)))},i(f){N(s)},o:P,d(f){f&&h(e),s.d(),t=!1,n()}}}function ol(r,e,t){let n;ie(r,re,o=>t(7,n=o));let l=!1,i="",{device:s=new Ne}=e;function f(){let o=s.forcedTags;o.push(`tag:${i}`),o=[...new Set(o)],o=o.map(d=>d.toLowerCase()),Bt(s.id,o).then(d=>{t(0,l=!1),t(1,i=""),he()}).catch(d=>{ae(re,n=d,n)})}function a(){i=this.value,t(1,i)}const u=()=>{t(0,l=!1),t(1,i="")},c=()=>{t(0,l=!0)};return r.$$set=o=>{"device"in o&&t(3,s=o.device)},[l,i,f,s,a,u,c]}class al extends me{constructor(e){super(),ge(this,e,ol,sl,pe,{device:3})}}function vt(r,e,t){const n=r.slice();return n[4]=e[t],n}function _t(r){let e,t=r[4].replace("tag:","")+"",n,l,i,s='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',f,a,u;function c(){return r[2](r[4])}return{c(){e=p("span"),n=te(t),l=L(),i=p("button"),i.innerHTML=s,f=L(),this.h()},l(o){e=m(o,"SPAN",{class:!0});var d=y(e);n=le(d,t),l=B(d),i=m(d,"BUTTON",{class:!0,"data-svelte-h":!0}),O(i)!=="svelte-15qgdf5"&&(i.innerHTML=s),f=B(d),d.forEach(h),this.h()},h(){v(i,"class","ml-1"),v(e,"class","btn btn-xs btn-primary normal-case")},m(o,d){D(o,e,d),_(e,n),_(e,l),_(e,i),_(e,f),a||(u=j(i,"click",De(c)),a=!0)},p(o,d){r=o,d&1&&t!==(t=r[4].replace("tag:","")+"")&&ve(n,t)},d(o){o&&h(e),a=!1,u()}}}function cl(r){let e,t,n,l,i;n=new al({props:{device:r[0]}});let s=ue(r[0].forcedTags),f=[];for(let a=0;a<s.length;a+=1)f[a]=_t(vt(r,s,a));return{c(){e=p("div"),t=p("span"),ke(n.$$.fragment),l=L();for(let a=0;a<f.length;a+=1)f[a].c();this.h()},l(a){e=m(a,"DIV",{class:!0});var u=y(e);t=m(u,"SPAN",{});var c=y(t);we(n.$$.fragment,c),c.forEach(h),l=B(u);for(let o=0;o<f.length;o+=1)f[o].l(u);u.forEach(h),this.h()},h(){v(e,"class","flex gap-1")},m(a,u){D(a,e,u),_(e,t),Te(n,t,null),_(e,l);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(e,null);i=!0},p(a,[u]){const c={};if(u&1&&(c.device=a[0]),n.$set(c),u&3){s=ue(a[0].forcedTags);let o;for(o=0;o<s.length;o+=1){const d=vt(a,s,o);f[o]?f[o].p(d,u):(f[o]=_t(d),f[o].c(),f[o].m(e,null))}for(;o<f.length;o+=1)f[o].d(1);f.length=s.length}},i(a){i||(N(n.$$.fragment,a),i=!0)},o(a){J(n.$$.fragment,a),i=!1},d(a){a&&h(e),Ce(n),xe(f,a)}}}function ul(r,e,t){let n;ie(r,re,f=>t(3,n=f));let{device:l=new Ne}=e;function i(f){let a=l.forcedTags;a=a.filter(u=>u!==f),Bt(l.id,a).then(u=>{he()}).catch(u=>{ae(re,n=u,n)})}const s=f=>{i(f)};return r.$$set=f=>{"device"in f&&t(0,l=f.device)},[l,i,s]}class fl extends me{constructor(e){super(),ge(this,e,ul,cl,pe,{device:0})}}function pt(r,e,t){const n=r.slice();return n[9]=e[t],n}function dl(r){let e,t,n,l,i='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',s,f,a,u='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',c,o,d,T=ue(r[3]),k=[];for(let g=0;g<T.length;g+=1)k[g]=mt(pt(r,T,g));return{c(){e=p("form"),t=p("select");for(let g=0;g<k.length;g+=1)k[g].c();n=L(),l=p("button"),l.innerHTML=i,f=L(),a=p("button"),a.innerHTML=u,this.h()},l(g){e=m(g,"FORM",{});var b=y(e);t=m(b,"SELECT",{class:!0});var E=y(t);for(let C=0;C<k.length;C+=1)k[C].l(E);E.forEach(h),n=B(b),l=m(b,"BUTTON",{class:!0,"data-svelte-h":!0}),O(l)!=="svelte-xktkcq"&&(l.innerHTML=i),f=B(b),a=m(b,"BUTTON",{type:!0,"data-svelte-h":!0}),O(a)!=="svelte-11oy0dm"&&(a.innerHTML=u),b.forEach(h),this.h()},h(){v(t,"class","card-select mr-3"),t.required=!0,r[2]===void 0&&Z(()=>r[6].call(t)),v(l,"class",""),v(a,"type","button")},m(g,b){D(g,e,b),_(e,t);for(let E=0;E<k.length;E+=1)k[E]&&k[E].m(t,null);ze(t,r[2],!0),_(e,n),_(e,l),_(e,f),_(e,a),o||(d=[j(t,"change",r[6]),j(a,"click",De(r[7])),j(e,"submit",qe(r[4]))],o=!0)},p(g,b){if(b&8){T=ue(g[3]);let E;for(E=0;E<T.length;E+=1){const C=pt(g,T,E);k[E]?k[E].p(C,b):(k[E]=mt(C),k[E].c(),k[E].m(t,null))}for(;E<k.length;E+=1)k[E].d(1);k.length=T.length}b&12&&ze(t,g[2])},i(g){s||Z(()=>{s=$(l,ee,{}),s.start()}),c||Z(()=>{c=$(a,ee,{}),c.start()})},o:P,d(g){g&&h(e),xe(k,g),o=!1,Be(d)}}}function hl(r){let e=r[0].user.name+"",t,n,l,i='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',s,f;return{c(){t=te(e),n=L(),l=p("button"),l.innerHTML=i,this.h()},l(a){t=le(a,e),n=B(a),l=m(a,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(l)!=="svelte-1f57wop"&&(l.innerHTML=i),this.h()},h(){v(l,"type","button"),v(l,"class","ml-2")},m(a,u){D(a,t,u),D(a,n,u),D(a,l,u),s||(f=j(l,"click",r[5]),s=!0)},p(a,u){u&1&&e!==(e=a[0].user.name+"")&&ve(t,e)},i:P,o:P,d(a){a&&(h(t),h(n),h(l)),s=!1,f()}}}function mt(r){let e,t=(r[9].name.length>1?r[9].name:r[9].email)+"",n,l;return{c(){e=p("option"),n=te(t),this.h()},l(i){e=m(i,"OPTION",{});var s=y(e);n=le(s,t),s.forEach(h),this.h()},h(){e.__value=l=r[9].id,_e(e,e.__value)},m(i,s){D(i,e,s),_(e,n)},p(i,s){s&8&&t!==(t=(i[9].name.length>1?i[9].name:i[9].email)+"")&&ve(n,t),s&8&&l!==(l=i[9].id)&&(e.__value=l,_e(e,e.__value))},d(i){i&&h(e)}}}function vl(r){let e;function t(i,s){return i[1]?dl:hl}let n=t(r),l=n(r);return{c(){e=p("td"),l.c()},l(i){e=m(i,"TD",{});var s=y(e);l.l(s),s.forEach(h)},m(i,s){D(i,e,s),l.m(e,null)},p(i,[s]){n===(n=t(i))&&l?l.p(i,s):(l.d(1),l=n(i),l&&(l.c(),N(l,1),l.m(e,null)))},i(i){N(l)},o:P,d(i){i&&h(e),l.d()}}}function _l(r,e,t){let n,l;ie(r,re,d=>t(8,n=d)),ie(r,xt,d=>t(3,l=d));let{device:i=new Ne}=e,s=!1,f=i.user.id;function a(){Vt(i.id,f).then(d=>{t(1,s=!1),he()}).catch(d=>{ae(re,n=d,n)})}const u=()=>{t(1,s=!0)};function c(){f=Lt(this),t(2,f)}const o=()=>t(1,s=!1);return r.$$set=d=>{"device"in d&&t(0,i=d.device)},[i,s,f,l,a,u,c,o]}class pl extends me{constructor(e){super(),ge(this,e,_l,vl,pe,{device:0})}}function ml(r){let e,t,n=r[0].name+"",l,i,s,f,a,u='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',c,o,d,T="or Cancel",k,g,b,E='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',C,M,F;return{c(){e=p("span"),t=te("Deleting "),l=te(n),i=te(". Confirm"),f=L(),a=p("button"),a.innerHTML=u,o=L(),d=p("span"),d.textContent=T,g=L(),b=p("button"),b.innerHTML=E,this.h()},l(U){e=m(U,"SPAN",{class:!0});var I=y(e);t=le(I,"Deleting "),l=le(I,n),i=le(I,". Confirm"),I.forEach(h),f=B(U),a=m(U,"BUTTON",{"data-svelte-h":!0}),O(a)!=="svelte-gpbcna"&&(a.innerHTML=u),o=B(U),d=m(U,"SPAN",{class:!0,"data-svelte-h":!0}),O(d)!=="svelte-1jg25yh"&&(d.textContent=T),g=B(U),b=m(U,"BUTTON",{class:!0,"data-svelte-h":!0}),O(b)!=="svelte-s7u8ym"&&(b.innerHTML=E),this.h()},h(){v(e,"class","font-bold text-red-400"),v(d,"class","font-bold text-red-400"),v(b,"class","mr-4")},m(U,I){D(U,e,I),_(e,t),_(e,l),_(e,i),D(U,f,I),D(U,a,I),D(U,o,I),D(U,d,I),D(U,g,I),D(U,b,I),M||(F=[j(a,"click",De(r[4])),j(b,"click",De(r[5]))],M=!0)},p(U,I){I&1&&n!==(n=U[0].name+"")&&ve(l,n)},i(U){s||Z(()=>{s=$(e,ee,{}),s.start()}),c||Z(()=>{c=$(a,ee,{}),c.start()}),k||Z(()=>{k=$(d,ee,{}),k.start()}),C||Z(()=>{C=$(b,ee,{}),C.start()})},o:P,d(U){U&&(h(e),h(f),h(a),h(o),h(d),h(g),h(b)),M=!1,Be(F)}}}function gl(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',n,l;return{c(){e=p("button"),e.innerHTML=t,this.h()},l(i){e=m(i,"BUTTON",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-84a7rp"&&(e.innerHTML=t),this.h()},h(){v(e,"class","mr-4")},m(i,s){D(i,e,s),n||(l=j(e,"click",De(r[3])),n=!0)},p:P,i:P,o:P,d(i){i&&h(e),n=!1,l()}}}function bl(r){let e;function t(i,s){return i[1]?ml:gl}let n=t(r),l=n(r);return{c(){l.c(),e=ce()},l(i){l.l(i),e=ce()},m(i,s){l.m(i,s),D(i,e,s)},p(i,[s]){n===(n=t(i))&&l?l.p(i,s):(l.d(1),l=n(i),l&&(l.c(),N(l,1),l.m(e.parentNode,e)))},i(i){N(l)},o:P,d(i){i&&h(e),l.d(i)}}}function kl(r,e,t){let n;ie(r,re,c=>t(6,n=c));let{device:l=new Ne}=e,i=!1;function s(){jt(l.id).then(c=>{t(1,i=!1),he()}).catch(c=>{ae(re,n=c,n)})}const f=()=>t(1,i=!0),a=()=>s(),u=()=>t(1,i=!1);return r.$$set=c=>{"device"in c&&t(0,l=c.device)},[l,i,s,f,a,u]}class wl extends me{constructor(e){super(),ge(this,e,kl,bl,pe,{device:0})}}function Tl(r){let e,t,n,l,i,s='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',f,a,u,c='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',o,d,T;return{c(){e=p("form"),t=p("input"),l=L(),i=p("button"),i.innerHTML=s,a=L(),u=p("button"),u.innerHTML=c,this.h()},l(k){e=m(k,"FORM",{});var g=y(e);t=m(g,"INPUT",{class:!0,pattern:!0,placeholder:!0}),l=B(g),i=m(g,"BUTTON",{class:!0,"data-svelte-h":!0}),O(i)!=="svelte-62kjdp"&&(i.innerHTML=s),a=B(g),u=m(g,"BUTTON",{type:!0,"data-svelte-h":!0}),O(u)!=="svelte-14j73qc"&&(u.innerHTML=c),g.forEach(h),this.h()},h(){v(t,"class","card-input mb-1 lowercase"),t.required=!0,v(t,"pattern","[a-zA-Z0-9\\-\\.]+"),v(t,"placeholder","name"),v(i,"class",""),v(u,"type","button")},m(k,g){D(k,e,g),_(e,t),_e(t,r[2]),_(e,l),_(e,i),_(e,a),_(e,u),r[11](e),d||(T=[j(t,"click",De(r[7])),j(t,"input",r[9]),j(i,"click",De(r[6])),j(u,"click",De(r[10])),j(e,"submit",qe(r[4]))],d=!0)},p(k,g){g&4&&t.value!==k[2]&&_e(t,k[2])},i(k){n||Z(()=>{n=$(t,Ze,{}),n.start()}),f||Z(()=>{f=$(i,ee,{}),f.start()}),o||Z(()=>{o=$(u,ee,{}),o.start()})},o:P,d(k){k&&h(e),r[11](null),d=!1,Be(T)}}}function Cl(r){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>',n,l;return{c(){e=p("button"),e.innerHTML=t,this.h()},l(i){e=m(i,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(e)!=="svelte-khxkpa"&&(e.innerHTML=t),this.h()},h(){v(e,"type","button"),v(e,"class","ml-2")},m(i,s){D(i,e,s),n||(l=j(e,"click",De(r[8])),n=!0)},p:P,i:P,o:P,d(i){i&&h(e),n=!1,l()}}}function Dl(r){let e;function t(i,s){return i[0]?Tl:Cl}let n=t(r),l=n(r);return{c(){l.c(),e=ce()},l(i){l.l(i),e=ce()},m(i,s){l.m(i,s),D(i,e,s)},p(i,[s]){n===(n=t(i))&&l?l.p(i,s):(l.d(1),l=n(i),l&&(l.c(),N(l,1),l.m(e.parentNode,e)))},i(i){N(l)},o:P,d(i){i&&h(e),l.d(i)}}}function yl(r,e,t){let n;ie(r,re,b=>t(12,n=b));let l,i="",{cardEditing:s=!1}=e,{device:f=new Ne}=e;function a(){t(0,s=!0),t(2,i=f.givenName)}function u(){l.reportValidity()?At(f.id,i.toLowerCase()).then(b=>{t(0,s=!1),he()}).catch(b=>{ae(re,n=b,n)}):ae(re,n="Use lower case letters, periods, or dashes only",n)}function c(b){Re.call(this,r,b)}function o(b){Re.call(this,r,b)}const d=()=>a();function T(){i=this.value,t(2,i)}const k=()=>t(0,s=!1);function g(b){Oe[b?"unshift":"push"](()=>{l=b,t(1,l)})}return r.$$set=b=>{"cardEditing"in b&&t(0,s=b.cardEditing),"device"in b&&t(5,f=b.device)},[s,l,i,a,u,f,c,o,d,T,k,g]}class El extends me{constructor(e){super(),ge(this,e,yl,Dl,pe,{cardEditing:0,device:5})}}function gt(r,e,t){const n=r.slice();return n[6]=e[t],n}function bt(r){let e;function t(i,s){return i[0].online?Sl:Ml}let n=t(r),l=n(r);return{c(){l.c(),e=ce()},l(i){l.l(i),e=ce()},m(i,s){l.m(i,s),D(i,e,s)},p(i,s){n===(n=t(i))&&l?l.p(i,s):(l.d(1),l=n(i),l&&(l.c(),l.m(e.parentNode,e)))},d(i){i&&h(e),l.d(i)}}}function Ml(r){let e,t,n,l,i=r[0].id+"",s,f,a=r[0].givenName+"",u;return{c(){e=p("span"),l=L(),s=te(i),f=te(": "),u=te(a),this.h()},l(c){e=m(c,"SPAN",{class:!0,"data-tip":!0}),y(e).forEach(h),l=B(c),s=le(c,i),f=le(c,": "),u=le(c,a),this.h()},h(){v(e,"class",t="badge badge-xs tooltip "+Ke(new Date(r[0].lastSeen),r[0].online)),v(e,"data-tip",n=Tt(new Date(r[0].lastSeen)))},m(c,o){D(c,e,o),D(c,l,o),D(c,s,o),D(c,f,o),D(c,u,o)},p(c,o){o&1&&t!==(t="badge badge-xs tooltip "+Ke(new Date(c[0].lastSeen),c[0].online))&&v(e,"class",t),o&1&&n!==(n=Tt(new Date(c[0].lastSeen)))&&v(e,"data-tip",n),o&1&&i!==(i=c[0].id+"")&&ve(s,i),o&1&&a!==(a=c[0].givenName+"")&&ve(u,a)},d(c){c&&(h(e),h(l),h(s),h(f),h(u))}}}function Sl(r){let e,t,n,l=r[0].id+"",i,s,f=r[0].givenName+"",a;return{c(){e=p("span"),n=L(),i=te(l),s=te(": "),a=te(f),this.h()},l(u){e=m(u,"SPAN",{class:!0,"data-tip":!0}),y(e).forEach(h),n=B(u),i=le(u,l),s=le(u,": "),a=le(u,f),this.h()},h(){v(e,"class",t="badge badge-xs tooltip "+Ke(new Date(r[0].lastSeen),r[0].online)),v(e,"data-tip","online")},m(u,c){D(u,e,c),D(u,n,c),D(u,i,c),D(u,s,c),D(u,a,c)},p(u,c){c&1&&t!==(t="badge badge-xs tooltip "+Ke(new Date(u[0].lastSeen),u[0].online))&&v(e,"class",t),c&1&&l!==(l=u[0].id+"")&&ve(i,l),c&1&&f!==(f=u[0].givenName+"")&&ve(a,f)},d(u){u&&(h(e),h(n),h(i),h(s),h(a))}}}function Nl(r){let e,t;return{c(){e=Me("svg"),t=Me("path"),this.h()},l(n){e=Se(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var l=y(e);t=Se(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(t).forEach(h),l.forEach(h),this.h()},h(){v(t,"stroke-linecap","round"),v(t,"stroke-linejoin","round"),v(t,"d","M5 15l7-7 7 7"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"class","h-6 w-6 inline flex-shrink-0"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"stroke","currentColor"),v(e,"stroke-width","2")},m(n,l){D(n,e,l),_(e,t)},d(n){n&&h(e)}}}function Ll(r){let e,t;return{c(){e=Me("svg"),t=Me("path"),this.h()},l(n){e=Se(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var l=y(e);t=Se(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(t).forEach(h),l.forEach(h),this.h()},h(){v(t,"stroke-linecap","round"),v(t,"stroke-linejoin","round"),v(t,"d","M19 9l-7 7-7-7"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"class","h-6 w-6 inline flex-shrink-0"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"stroke","currentColor"),v(e,"stroke-width","2")},m(n,l){D(n,e,l),_(e,t)},d(n){n&&h(e)}}}function kt(r){let e,t,n,l,i,s,f="Device Last Seen",a,u,c=new Date(r[0].lastSeen)+"",o,d,T,k,g="IP Addresses",b,E,C,M,F,U,I="Assigned User",G,S,x,w,H,V="Device Name",A,Y,ne=r[0].name+"",fe,de,q,R,Q,z,se,be=ue(r[0].ipAddresses),X=[];for(let K=0;K<be.length;K+=1)X[K]=wt(gt(r,be,K));return S=new pl({props:{device:r[0]}}),R=new nl({props:{device:r[0]}}),{c(){e=p("div"),t=p("div"),n=p("table"),l=p("tbody"),i=p("tr"),s=p("th"),s.textContent=f,a=L(),u=p("td"),o=te(c),d=L(),T=p("tr"),k=p("th"),k.textContent=g,b=L(),E=p("td"),C=p("ul");for(let K=0;K<X.length;K+=1)X[K].c();M=L(),F=p("tr"),U=p("th"),U.textContent=I,G=L(),ke(S.$$.fragment),x=L(),w=p("tr"),H=p("th"),H.textContent=V,A=L(),Y=p("td"),fe=te(ne),de=L(),q=p("tr"),ke(R.$$.fragment),this.h()},l(K){e=m(K,"DIV",{class:!0});var oe=y(e);t=m(oe,"DIV",{class:!0});var ye=y(t);n=m(ye,"TABLE",{class:!0});var Ie=y(n);l=m(Ie,"TBODY",{});var W=y(l);i=m(W,"TR",{});var Le=y(i);s=m(Le,"TH",{"data-svelte-h":!0}),O(s)!=="svelte-13kw2s7"&&(s.textContent=f),a=B(Le),u=m(Le,"TD",{});var Qe=y(u);o=le(Qe,c),Qe.forEach(h),Le.forEach(h),d=B(W),T=m(W,"TR",{});var Ve=y(T);k=m(Ve,"TH",{"data-svelte-h":!0}),O(k)!=="svelte-1forfjj"&&(k.textContent=g),b=B(Ve),E=m(Ve,"TD",{});var Xe=y(E);C=m(Xe,"UL",{class:!0});var $e=y(C);for(let Fe=0;Fe<X.length;Fe+=1)X[Fe].l($e);$e.forEach(h),Xe.forEach(h),Ve.forEach(h),M=B(W),F=m(W,"TR",{});var je=y(F);U=m(je,"TH",{"data-svelte-h":!0}),O(U)!=="svelte-1c75l1v"&&(U.textContent=I),G=B(je),we(S.$$.fragment,je),je.forEach(h),x=B(W),w=m(W,"TR",{});var Ae=y(w);H=m(Ae,"TH",{"data-svelte-h":!0}),O(H)!=="svelte-b5c97l"&&(H.textContent=V),A=B(Ae),Y=m(Ae,"TD",{});var et=y(Y);fe=le(et,ne),et.forEach(h),Ae.forEach(h),de=B(W),q=m(W,"TR",{});var tt=y(q);we(R.$$.fragment,tt),tt.forEach(h),W.forEach(h),Ie.forEach(h),ye.forEach(h),oe.forEach(h),this.h()},h(){v(C,"class","list-disc list-inside"),v(n,"class","table table-compact w-full"),v(t,"class","overflow-x-auto"),v(e,"class","mt-2 pt-2 pl-2")},m(K,oe){D(K,e,oe),_(e,t),_(t,n),_(n,l),_(l,i),_(i,s),_(i,a),_(i,u),_(u,o),_(l,d),_(l,T),_(T,k),_(T,b),_(T,E),_(E,C);for(let ye=0;ye<X.length;ye+=1)X[ye]&&X[ye].m(C,null);_(l,M),_(l,F),_(F,U),_(F,G),Te(S,F,null),_(l,x),_(l,w),_(w,H),_(w,A),_(w,Y),_(Y,fe),_(l,de),_(l,q),Te(R,q,null),se=!0},p(K,oe){if(r=K,(!se||oe&1)&&c!==(c=new Date(r[0].lastSeen)+"")&&ve(o,c),oe&1){be=ue(r[0].ipAddresses);let W;for(W=0;W<be.length;W+=1){const Le=gt(r,be,W);X[W]?X[W].p(Le,oe):(X[W]=wt(Le),X[W].c(),X[W].m(C,null))}for(;W<X.length;W+=1)X[W].d(1);X.length=be.length}const ye={};oe&1&&(ye.device=r[0]),S.$set(ye),(!se||oe&1)&&ne!==(ne=r[0].name+"")&&ve(fe,ne);const Ie={};oe&1&&(Ie.device=r[0]),R.$set(Ie)},i(K){se||(N(S.$$.fragment,K),N(R.$$.fragment,K),Z(()=>{se&&(z&&z.end(1),Q=$(e,Ze,{}),Q.start())}),se=!0)},o(K){J(S.$$.fragment,K),J(R.$$.fragment,K),Q&&Q.invalidate(),z=Nt(e,Ze,{duration:r[1]?0:500}),se=!1},d(K){K&&h(e),xe(X,K),Ce(S),Ce(R),K&&z&&z.end()}}}function wt(r){let e,t=r[6]+"",n;return{c(){e=p("li"),n=te(t)},l(l){e=m(l,"LI",{});var i=y(e);n=le(i,t),i.forEach(h)},m(l,i){D(l,e,i),_(e,n)},p(l,i){i&1&&t!==(t=l[6]+"")&&ve(n,t)},d(l){l&&h(e)}}}function Bl(r){let e,t,n,l,i,s,f,a,u,c,o,d,T,k,g,b,E,C,M=r[2]==!1&&bt(r);function F(w){r[4](w)}let U={device:r[0]};r[2]!==void 0&&(U.cardEditing=r[2]),i=new El({props:U}),Oe.push(()=>Ye(i,"cardEditing",F)),u=new fl({props:{device:r[0]}}),d=new wl({props:{device:r[0]}});function I(w,H){return w[1]?Nl:Ll}let G=I(r),S=G(r),x=r[1]&&kt(r);return{c(){e=p("div"),t=p("div"),n=p("span"),M&&M.c(),l=L(),ke(i.$$.fragment),f=L(),a=p("div"),ke(u.$$.fragment),c=L(),o=p("div"),ke(d.$$.fragment),T=L(),k=p("button"),S.c(),g=L(),x&&x.c(),this.h()},l(w){e=m(w,"DIV",{class:!0});var H=y(e);t=m(H,"DIV",{class:!0});var V=y(t);n=m(V,"SPAN",{class:!0});var A=y(n);M&&M.l(A),l=B(A),we(i.$$.fragment,A),A.forEach(h),f=B(V),a=m(V,"DIV",{class:!0});var Y=y(a);we(u.$$.fragment,Y),Y.forEach(h),c=B(V),o=m(V,"DIV",{class:!0});var ne=y(o);we(d.$$.fragment,ne),T=B(ne),k=m(ne,"BUTTON",{type:!0});var fe=y(k);S.l(fe),fe.forEach(h),ne.forEach(h),V.forEach(h),g=B(H),x&&x.l(H),H.forEach(h),this.h()},h(){v(n,"class","min-w-64 w-1/2 font-bold"),v(a,"class","grow w-full"),v(k,"type","button"),v(o,"class","grow min-w-fit"),v(t,"class","flex items-center"),v(e,"class","card-primary bg-base-200")},m(w,H){D(w,e,H),_(e,t),_(t,n),M&&M.m(n,null),_(n,l),Te(i,n,null),_(t,f),_(t,a),Te(u,a,null),_(t,c),_(t,o),Te(d,o,null),_(o,T),_(o,k),S.m(k,null),_(e,g),x&&x.m(e,null),b=!0,E||(C=[j(t,"keypress",r[3]),j(t,"click",r[5])],E=!0)},p(w,[H]){w[2]==!1?M?M.p(w,H):(M=bt(w),M.c(),M.m(n,l)):M&&(M.d(1),M=null);const V={};H&1&&(V.device=w[0]),!s&&H&4&&(s=!0,V.cardEditing=w[2],Ge(()=>s=!1)),i.$set(V);const A={};H&1&&(A.device=w[0]),u.$set(A);const Y={};H&1&&(Y.device=w[0]),d.$set(Y),G!==(G=I(w))&&(S.d(1),S=G(w),S&&(S.c(),S.m(k,null))),w[1]?x?(x.p(w,H),H&2&&N(x,1)):(x=kt(w),x.c(),N(x,1),x.m(e,null)):x&&(He(),J(x,1,1,()=>{x=null}),Ue())},i(w){b||(N(i.$$.fragment,w),N(u.$$.fragment,w),N(d.$$.fragment,w),N(x),b=!0)},o(w){J(i.$$.fragment,w),J(u.$$.fragment,w),J(d.$$.fragment,w),J(x),b=!1},d(w){w&&h(e),M&&M.d(),Ce(i),Ce(u),Ce(d),S.d(),x&&x.d(),E=!1,Be(C)}}}function Hl(r){let t=Math.round((new Date().getTime()-r.getTime())/1e3);return t<3600?"bg-success":t<86400?"bg-warning":"bg-error"}function Ul(r){return r?"bg-success":"bg-error"}function Ke(r,e){return e!==void 0?Ul(e):Hl(r)}function Tt(r){let t=Math.round((new Date().getTime()-r.getTime())/1e3),n="";return t<60?n="seconds":t<3600?(t=Math.floor(t/60),t==1?n="minute":n="minutes"):t<86400?(t=Math.floor(t/(60*60)),t==1?n="hour":n="hours"):(t=Math.floor(t/(60*60*24)),t==1?n="day":n="days"),`Last seen ${t} ${n} ago`}function xl(r,e,t){let{device:n=new Ne}=e,l=!1,i=!1;function s(u){Re.call(this,r,u)}function f(u){i=u,t(2,i)}const a=()=>t(1,l=!l);return r.$$set=u=>{"device"in u&&t(0,n=u.device)},[n,l,i,s,f,a]}class Il extends me{constructor(e){super(),ge(this,e,xl,Bl,pe,{device:0})}}function Ol(r){let e,t,n,l,i,s,f;return{c(){e=p("div"),t=Me("svg"),n=Me("path"),l=L(),i=p("input"),this.h()},l(a){e=m(a,"DIV",{class:!0});var u=y(e);t=Se(u,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var c=y(t);n=Se(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(n).forEach(h),c.forEach(h),l=B(u),i=m(u,"INPUT",{type:!0,placeholder:!0,class:!0}),u.forEach(h),this.h()},h(){v(n,"stroke-linecap","round"),v(n,"stroke-linejoin","round"),v(n,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),v(t,"xmlns","http://www.w3.org/2000/svg"),v(t,"class","h-5 w-5 ml-3 mr-1 inline flex-shrink-0"),v(t,"fill","none"),v(t,"viewBox","0 0 24 24"),v(t,"stroke","currentColor"),v(t,"stroke-width","2"),v(i,"type","text"),v(i,"placeholder","search"),v(i,"class","input input-bordered input-xs w-full max-w-xs"),v(e,"class","flex")},m(a,u){D(a,e,u),_(e,t),_(t,n),_(e,l),_(e,i),_e(i,r[0]),s||(f=j(i,"input",r[2]),s=!0)},p(a,[u]){u&1&&i.value!==a[0]&&_e(i,a[0])},i:P,o:P,d(a){a&&h(e),s=!1,f()}}}function Vl(r,e,t){let n;ie(r,Je,s=>t(0,n=s));let{overrideSort:l=!1}=e;Je.subscribe(s=>{s!=""?t(1,l=!0):t(1,l=!1),Pt()});function i(){n=this.value,Je.set(n)}return r.$$set=s=>{"overrideSort"in s&&t(1,l=s.overrideSort)},[n,l,i]}class jl extends me{constructor(e){super(),ge(this,e,Vl,Ol,pe,{overrideSort:1})}}function Al(r){let e,t;return{c(){e=Me("svg"),t=Me("path"),this.h()},l(n){e=Se(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var l=y(e);t=Se(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(t).forEach(h),l.forEach(h),this.h()},h(){v(t,"stroke-linecap","round"),v(t,"stroke-linejoin","round"),v(t,"d","M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"class","h-6 w-6"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"stroke","currentColor"),v(e,"stroke-width","2")},m(n,l){D(n,e,l),_(e,t)},d(n){n&&h(e)}}}function Pl(r){let e,t;return{c(){e=Me("svg"),t=Me("path"),this.h()},l(n){e=Se(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var l=y(e);t=Se(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(t).forEach(h),l.forEach(h),this.h()},h(){v(t,"stroke-linecap","round"),v(t,"stroke-linejoin","round"),v(t,"d","M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"class","h-6 w-6"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"stroke","currentColor"),v(e,"stroke-width","2")},m(n,l){D(n,e,l),_(e,t)},d(n){n&&h(e)}}}function Rl(r){let e,t,n,l,i,s="ID",f,a,u="Device Name",c,o,d="Last Seen",T,k;function g(C,M){return C[0]=="ascending"?Pl:Al}let b=g(r),E=b(r);return{c(){e=p("span"),t=p("button"),E.c(),n=L(),l=p("span"),i=p("button"),i.textContent=s,f=L(),a=p("button"),a.textContent=u,c=L(),o=p("button"),o.textContent=d,this.h()},l(C){e=m(C,"SPAN",{class:!0});var M=y(e);t=m(M,"BUTTON",{class:!0});var F=y(t);E.l(F),F.forEach(h),n=B(M),l=m(M,"SPAN",{class:!0});var U=y(l);i=m(U,"BUTTON",{class:!0,"data-svelte-h":!0}),O(i)!=="svelte-1vb32l8"&&(i.textContent=s),f=B(U),a=m(U,"BUTTON",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-1hpoaik"&&(a.textContent=u),c=B(U),o=m(U,"BUTTON",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-oo5r4o"&&(o.textContent=d),U.forEach(h),M.forEach(h),this.h()},h(){v(t,"class","mx-1"),v(i,"class","btn btn-xs"),Ee(i,"btn-active",r[1]=="id"),v(a,"class","btn btn-xs capitalize"),Ee(a,"btn-active",r[1]=="givenName"),v(o,"class","btn btn-xs capitalize"),Ee(o,"btn-active",r[1]=="lastSeen"),v(l,"class","btn-group"),v(e,"class","flex")},m(C,M){D(C,e,M),_(e,t),E.m(t,null),_(e,n),_(e,l),_(l,i),_(l,f),_(l,a),_(l,c),_(l,o),T||(k=[j(t,"keypress",r[3]),j(t,"click",r[4]),j(i,"click",r[5]),j(a,"click",r[6]),j(o,"click",r[7])],T=!0)},p(C,[M]){b!==(b=g(C))&&(E.d(1),E=b(C),E&&(E.c(),E.m(t,null))),M&2&&Ee(i,"btn-active",C[1]=="id"),M&2&&Ee(a,"btn-active",C[1]=="givenName"),M&2&&Ee(o,"btn-active",C[1]=="lastSeen")},i:P,o:P,d(C){C&&h(e),E.d(),T=!1,Be(k)}}}function zl(r,e,t){let n,l;ie(r,We,o=>t(0,n=o)),ie(r,Pe,o=>t(1,l=o));function i(){n=="ascending"?ae(We,n="descending",n):ae(We,n="ascending",n),he()}function s(o){Re.call(this,r,o)}return[n,l,i,s,()=>{i()},()=>{ae(Pe,l="id",l),he()},()=>{ae(Pe,l="givenName",l),he()},()=>{ae(Pe,l="lastSeen",l),he()}]}class Kl extends me{constructor(e){super(),ge(this,e,zl,Rl,pe,{})}}function Ct(r,e,t){const n=r.slice();return n[12]=e[t],n}function Dt(r){let e,t,n='<h1 class="text-2xl bold text-primary">Device View</h1>',l,i,s,f,a,u=r[3]==="succeeded"&&yt(r),c=r[3]==="failed"&&St();return{c(){e=p("div"),t=p("div"),t.innerHTML=n,i=L(),u&&u.c(),s=L(),c&&c.c(),this.h()},l(o){e=m(o,"DIV",{});var d=y(e);t=m(d,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1hgd3vk"&&(t.innerHTML=n),i=B(d),u&&u.l(d),s=B(d),c&&c.l(d),d.forEach(h),this.h()},h(){v(t,"class","px-4 pt-4")},m(o,d){D(o,e,d),_(e,t),_(e,i),u&&u.m(e,null),_(e,s),c&&c.m(e,null),a=!0},p(o,d){o[3]==="succeeded"?u?(u.p(o,d),d&8&&N(u,1)):(u=yt(o),u.c(),N(u,1),u.m(e,s)):u&&(He(),J(u,1,1,()=>{u=null}),Ue()),o[3]==="failed"?c?d&8&&N(c,1):(c=St(),c.c(),N(c,1),c.m(e,null)):c&&(c.d(1),c=null)},i(o){a||(l||Z(()=>{l=$(t,ee,{}),l.start()}),N(u),N(c),f||Z(()=>{f=$(e,ee,{}),f.start()}),a=!0)},o(o){J(u),a=!1},d(o){o&&h(e),u&&u.d(),c&&c.d()}}}function yt(r){let e,t,n,l,i,s,f,a,u,c,o,d,T,k,g,b;function E(w,H){return w[1]==!1?Fl:ql}let C=E(r),M=C(r);f=new Kl({}),u=new jl({});function F(w){r[8](w)}function U(w){r[9](w)}let I={};r[1]!==void 0&&(I.newDeviceCardVisible=r[1]),r[0]!==void 0&&(I.newDeviceKey=r[0]),o=new Gt({props:I}),Oe.push(()=>Ye(o,"newDeviceCardVisible",F)),Oe.push(()=>Ye(o,"newDeviceKey",U));let G=ue(r[4]),S=[];for(let w=0;w<G.length;w+=1)S[w]=Mt(Ct(r,G,w));const x=w=>J(S[w],1,1,()=>{S[w]=null});return{c(){e=p("table"),t=p("tr"),n=p("td"),l=p("div"),M.c(),i=L(),s=p("td"),ke(f.$$.fragment),a=p("td"),ke(u.$$.fragment),c=L(),ke(o.$$.fragment),k=L(),g=p("div");for(let w=0;w<S.length;w+=1)S[w].c();this.h()},l(w){e=m(w,"TABLE",{});var H=y(e);t=m(H,"TR",{});var V=y(t);n=m(V,"TD",{});var A=y(n);l=m(A,"DIV",{class:!0});var Y=y(l);M.l(Y),i=B(Y),Y.forEach(h),A.forEach(h),s=m(V,"TD",{});var ne=y(s);we(f.$$.fragment,ne),ne.forEach(h),a=m(V,"TD",{});var fe=y(a);we(u.$$.fragment,fe),fe.forEach(h),V.forEach(h),H.forEach(h),c=B(w),we(o.$$.fragment,w),k=B(w),g=m(w,"DIV",{class:!0});var de=y(g);for(let q=0;q<S.length;q+=1)S[q].l(de);de.forEach(h),this.h()},h(){v(l,"class","p-4"),v(g,"class","flex flex-col gap-2")},m(w,H){D(w,e,H),_(e,t),_(t,n),_(n,l),M.m(l,null),_(l,i),_(t,s),Te(f,s,null),_(t,a),Te(u,a,null),D(w,c,H),Te(o,w,H),D(w,k,H),D(w,g,H);for(let V=0;V<S.length;V+=1)S[V]&&S[V].m(g,null);b=!0},p(w,H){C===(C=E(w))&&M?M.p(w,H):(M.d(1),M=C(w),M&&(M.c(),M.m(l,i)));const V={};if(!d&&H&2&&(d=!0,V.newDeviceCardVisible=w[1],Ge(()=>d=!1)),!T&&H&1&&(T=!0,V.newDeviceKey=w[0],Ge(()=>T=!1)),o.$set(V),H&48){G=ue(w[4]);let A;for(A=0;A<G.length;A+=1){const Y=Ct(w,G,A);S[A]?(S[A].p(Y,H),N(S[A],1)):(S[A]=Mt(Y),S[A].c(),N(S[A],1),S[A].m(g,null))}for(He(),A=G.length;A<S.length;A+=1)x(A);Ue()}},i(w){if(!b){N(f.$$.fragment,w),N(u.$$.fragment,w),N(o.$$.fragment,w);for(let H=0;H<G.length;H+=1)N(S[H]);b=!0}},o(w){J(f.$$.fragment,w),J(u.$$.fragment,w),J(o.$$.fragment,w),S=S.filter(Boolean);for(let H=0;H<S.length;H+=1)J(S[H]);b=!1},d(w){w&&(h(e),h(c),h(k),h(g)),M.d(),Ce(f),Ce(u),Ce(o,w),xe(S,w)}}}function ql(r){let e,t="- Hide New Device",n,l;return{c(){e=p("button"),e.textContent=t,this.h()},l(i){e=m(i,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),O(e)!=="svelte-1ty81fl"&&(e.textContent=t),this.h()},h(){v(e,"class","btn btn-secondary btn-xs capitalize"),v(e,"type","button")},m(i,s){D(i,e,s),n||(l=j(e,"click",r[7]),n=!0)},p:P,d(i){i&&h(e),n=!1,l()}}}function Fl(r){let e,t="+ New Device",n,l;return{c(){e=p("button"),e.textContent=t,this.h()},l(i){e=m(i,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),O(e)!=="svelte-w2fa7u"&&(e.textContent=t),this.h()},h(){v(e,"class","btn btn-primary btn-xs capitalize"),v(e,"type","button")},m(i,s){D(i,e,s),n||(l=j(e,"click",r[6]),n=!0)},p:P,d(i){i&&h(e),n=!1,l()}}}function Et(r){let e,t;return e=new Il({props:{device:r[12]}}),{c(){ke(e.$$.fragment)},l(n){we(e.$$.fragment,n)},m(n,l){Te(e,n,l),t=!0},p(n,l){const i={};l&16&&(i.device=n[12]),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){J(e.$$.fragment,n),t=!1},d(n){Ce(e,n)}}}function Mt(r){let e=r[5].includes(r[12]),t,n,l=e&&Et(r);return{c(){l&&l.c(),t=ce()},l(i){l&&l.l(i),t=ce()},m(i,s){l&&l.m(i,s),D(i,t,s),n=!0},p(i,s){s&48&&(e=i[5].includes(i[12])),e?l?(l.p(i,s),s&48&&N(l,1)):(l=Et(i),l.c(),N(l,1),l.m(t.parentNode,t)):l&&(He(),J(l,1,1,()=>{l=null}),Ue())},i(i){n||(N(l),n=!0)},o(i){J(l),n=!1},d(i){i&&h(t),l&&l.d(i)}}}function St(r){let e,t=`<p>API test did not succeed.<br/>Headscale might be down or API settings may need to be set<br/>change server settings in the <a href="${Ht}/settings.html" class="link link-primary">settings</a> page</p>`,n;return{c(){e=p("div"),e.innerHTML=t,this.h()},l(l){e=m(l,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1egukac"&&(e.innerHTML=t),this.h()},h(){v(e,"class","max-w-lg mx-auto p-4 border-4 text-sm text-base-content shadow-lg text-center")},m(l,i){D(l,e,i)},i(l){n||Z(()=>{n=$(e,ee,{}),n.start()})},o:P,d(l){l&&h(e)}}}function Jl(r){let e,t,n=r[2]&&Dt(r);return{c(){n&&n.c(),e=ce()},l(l){n&&n.l(l),e=ce()},m(l,i){n&&n.m(l,i),D(l,e,i),t=!0},p(l,[i]){l[2]?n?(n.p(l,i),i&4&&N(n,1)):(n=Dt(l),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(He(),J(n,1,1,()=>{n=null}),Ue())},i(l){t||(N(n),t=!0)},o(l){J(n),t=!1},d(l){l&&h(e),n&&n.d(l)}}}function Wl(r,e,t){let n,l,i,s;ie(r,Ut,g=>t(10,n=g)),ie(r,zt,g=>t(3,l=g)),ie(r,Kt,g=>t(4,i=g)),ie(r,qt,g=>t(5,s=g));var f=this&&this.__awaiter||function(g,b,E,C){function M(F){return F instanceof E?F:new E(function(U){U(F)})}return new(E||(E=Promise))(function(F,U){function I(x){try{S(C.next(x))}catch(w){U(w)}}function G(x){try{S(C.throw(x))}catch(w){U(w)}}function S(x){x.done?F(x.value):M(x.value).then(I,G)}S((C=C.apply(g,b||[])).next())})};let a="",u=!1,c=!1;It(()=>f(void 0,void 0,void 0,function*(){var g;t(0,a=(g=n.url.searchParams.get("nodekey"))!==null&&g!==void 0?g:""),t(1,u=a.length>0),Rt(),he(),t(2,c=!0)}));const o=()=>t(1,u=!0),d=()=>t(1,u=!1);function T(g){u=g,t(1,u)}function k(g){a=g,t(0,a)}return[a,u,c,l,i,s,o,d,T,k]}class tn extends me{constructor(e){super(),ge(this,e,Wl,Jl,pe,{})}}export{tn as component};
